{% extends "base.html" %}
{% load custom_filters %}
{% load static %}
{% load html_filters %}


{% block seo %} 
<title>{{ notification.title }}</title>
<meta name="description" content="{{ notification.description }}">
<meta name="keywords" content="{{ notification.keywords }}">
<link rel="canonical" href="{{ request.scheme }}://{{ request.get_host }}{{ notification.get_absolute_url }}">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="article"/>
<meta property="og:site_name" content="WifiResult">
<meta property="og:url" content="{{ request.scheme }}://{{ request.get_host }}{{ notification.get_absolute_url }}">
<meta property="og:title" content="{{ notification.title }}">
<meta property="og:description" content="{{ notification.description }}">
<meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}/static/logo/wifiresult-logo.png">
<meta property="og:image:alt" content="WifiResult logo">
<meta property="og:image:width" content="512" />
<meta property="og:image:height" content="512" />
<meta property="og:image:type" content="image/png">
<meta property="og:updated_time" content="{{ notification.published_date|date:'c' }}">
<meta property="article:published_time" content="{{ notification.published_date|date:'c' }}">
<meta property="article:modified_time" content="{{ notification.published_date|date:'c' }}">
<meta name="author" content="{{ notification.author|striptags }}">


<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="{{ request.scheme }}://{{ request.get_host }}{{ notification.get_absolute_url }}">
<meta name="twitter:title" content="{{ notification.title }}">
<meta name="twitter:description" content="{{ notification.description }}">
<meta name="twitter:image" content="{{ request.scheme }}://{{ request.get_host }}/static/logo/wifiresult-logo.png">
<meta name="twitter:site" content="@wifiresult" />
<meta name="twitter:creator" content="@arvindpal" />
<meta name="twitter:label1" content="Written by" />
<meta name="twitter:data1" content="Arvind Pal" />
<meta name="twitter:label2" content="Time to read" />
<meta name="twitter:data2" content="7 minutes" />
<meta name="twitter:label3" content="Category">
<meta name="twitter:data3" content="{{ notification.tag }}">

<!--BreadcrumbList -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "@id": "{{ request.scheme }}://{{ request.get_host }}{{ request.path }}#breadcrumb",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ request.scheme }}://{{ request.get_host }}/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "All PDF Notification",
      "item": "{{ request.scheme }}://{{ request.get_host }}/notifications/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ notification.title|escapejs }}",
      "item": "{{ request.scheme }}://{{ request.get_host }}{{ notification.get_absolute_url }}"
    }
  ]
}
</script>

<!--webpage + collectionpage-->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": ["WebPage","CollectionPage"],
  "@id": "{{ request.scheme }}://{{ request.get_host }}{{ notification.get_absolute_url }}#webpage",
  "url": "{{ request.scheme }}://{{ request.get_host }}{{ notification.get_absolute_url }}",
  "name": "{{ notification.title }}",
  "headline": "{{ notification.h1|striptags|escapejs }}",
  "description": "{{ notification.description }}",
  "isPartOf": { "@id": "{{ request.scheme }}://{{ request.get_host }}/#website" },
  "publisher": { "@id": "{{ request.scheme }}://{{ request.get_host }}/#organization" },
  "primaryImageOfPage": {
    "@type": "ImageObject",
    "url": "{{ request.scheme }}://{{ request.get_host }}/static/logo/wifiresult-logo.png",
    "width": 512,
    "height": 512
  },
  "inLanguage": "en",
  "breadcrumb": { "@id": "{{ request.scheme }}://{{ request.get_host }}/notifications/#breadcrumb" }
}
</script>

<!--Article Schema — content detail-->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "NewsArticle",
  "@id": "{{ request.scheme }}://{{ request.get_host }}{{ request.path }}#article",
  "mainEntityOfPage": {
    "@id": "{{ request.scheme }}://{{ request.get_host }}{{ request.path }}#webpage"
  },
  "headline": "{{ notification.h1|striptags|escapejs }}",
  "description": "{{ notification.description|truncatechars:300|escapejs }}",
  "articleSection": "Notification",
  "datePublished": "{{ notification.created_at|date:'Y-m-d' }}",
  "dateModified": "{{ notification.created_at|date:'Y-m-d' }}",
  "author": {
    "@type": "Person",
    "name": "{{ notification.author|striptags }}"
  },
  "publisher": {
    "@type": "Organization",
    "@id": "{{ request.scheme }}://{{ request.get_host }}/#organization"
  },
  "image": {
    "@type": "ImageObject",
    "url": "{{ request.scheme }}://{{ request.get_host }}/static/logo/wifiresult-logo.png",
    "width": 512,
    "height": 512
  },
  "isPartOf": {
    "@type": "WebSite",
    "@id": "{{ request.scheme }}://{{ request.get_host }}/#website"
  },
  "hasPart": {
        "@id": "{{ request.scheme }}://{{ request.get_host }}{{ notification.get_absolute_url }}#pdf"
      }
}
</script>

  <style>
    .pdf-page-wrapper {
        max-width: 1000px;
        margin: 20px auto 40px;
        padding: 0 10px;
    }

    .pdf-header {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        align-items: center;
        margin-bottom: 12px;
    }

    .pdf-title {
        font-size: 22px;
        font-weight: 600;
        margin: 0;
        text-transform: uppercase;
    }

    .pdf-download-btn {
        display: inline-block;
        padding: 8px 16px;
        font-size: 14px;
        border-radius: 4px;
        text-decoration: none;
        border: 1px solid #2563eb;
        color: #ffffff;
        background: #2563eb;
        white-space: nowrap;
        transition: 0.15s ease;
    }

    .pdf-download-btn:hover {
        background: #1d4ed8;
        border-color: #1d4ed8;
    }

    .pdf-overview-card {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 6px;
        padding: 12px 14px;
        margin-bottom: 16px;
    }

    .pdf-overview-title {
        font-size: 15px;
        font-weight: 600;
        margin: 0 0 6px 0;
    }

    .pdf-overview-body {
        font-size: 14px;
        line-height: 1.6;
        max-height: 150px;
        overflow: auto;
    }

    .pdf-viewer-card {
        border-radius: 6px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 0 10px rgba(0,0,0,0.05);
        overflow: hidden;
    }

    .pdf-viewer-frame {
        width: 100%;
        height: 80vh;
        border: none;
    }

    .pdf-footer-download {
        margin-top: 12px;
        text-align: right;
    }

    @media (max-width: 768px) {
        .pdf-header {
            flex-direction: column;
            align-items: flex-start;
        }
        .pdf-title {
            font-size: 18px;
        }
        .pdf-overview-body {
            max-height: 180px;
        }
        .pdf-viewer-frame {
            height: 70vh;
        }
    }
</style>


  {% endblock seo %}

{% block content %}

  <!-- Breadcrumb -->
  <div class="breadcrumb">
    <div class="container">
      <a href="/">Home</a>
      <span>&gt;</span>
      <a href="{% url 'notification_list' %}">Notifications</a>
      <span>&gt;</span>
      <span>{{ notifications.tag }}</span>
    </div>
  </div>

<div class="pdf-page-wrapper">

    {% if notification.pdf_file %}
        <!-- Header: Title + Top Download Button -->
        <div class="pdf-header">
            <h1 class="pdf-title">{{ notification.title }}</h1>

            <a href="{{ notification.pdf_file.url }}" download class="pdf-download-btn">
                ⬇ Download Official PDF
            </a>
        </div>

        <!-- Overview box (notification.content se) -->
        {% if notification.overview %}
            <div class="pdf-overview-card">
                <p class="pdf-overview-title">Overview</p>
                <div class="pdf-overview-body ck-content">
                    {{ notification.overview|safe }}
                </div>
            </div>
        {% endif %}

        <!-- Main PDF Viewer -->
        <div class="pdf-viewer-card">
            <iframe
                src="{{ notification.pdf_file.url }}"
                class="pdf-viewer-frame">
            </iframe>
        </div>

        <!-- Bottom Download Button -->
        <div class="pdf-footer-download">
            <a href="{{ notification.pdf_file.url }}" download class="pdf-download-btn">
                ⬇ Download Official Notification PDF
            </a>
        </div>

    {% else %}
        <h1 class="pdf-title">{{ notification.title }}</h1>
        <p>No PDF uploaded for this notification.</p>
    {% endif %}

</div>


<!-- HTML: paste where you want the note to appear -->

<div class="site-note site-note--disclaimer">
  <div class="site-note__accent">
    <svg class="site-note__icon" viewBox="0 0 24 24">
      <path d="M12 2L2 22h20L12 2zm1 16h-2v-2h2v2zm0-4h-2V8h2v6z"/>
    </svg>
  </div>
  <div class="site-note__body">
    <p>
      <strong>Disclaimer:</strong> All PDF documents displayed on <strong> WifiResult</strong> are provided for informational purposes only and are based on official notifications from the relevant authorities. Applicants are requested to visit the official website before filling out the application. The website is not responsible for any errors, updates, or changes.
    </p>
  </div>
</div>



<style>
.site-note--disclaimer {
  background: #fff5f5;
  border-left: 5px solid #e63946;
  border-radius: 10px;
  padding: 14px;
  display: flex;
  gap: 14px;
  box-shadow: 0 6px 18px rgba(230, 57, 70, 0.12);
}

.site-note--disclaimer .site-note__accent {
  flex: 0 0 46px;
  height: 46px;
  border-radius: 8px;
  background: linear-gradient(135deg, #e63946, #b91c1c);
  display: flex;
  align-items: center;
  justify-content: center;
}

.site-note--disclaimer .site-note__icon {
  width: 22px;
  height: 22px;
  fill: #fff;
}

.site-note--disclaimer .site-note__body {
  color: #b91c1c;
  font-size: 15px;
  line-height: 1.6;
}

</style>  
{% endblock %}
