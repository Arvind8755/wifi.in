{% extends "base.html" %}
{% load static %}

    {% block seo %} 
  <title>Name & Date on Photo — WifiResult Tool</title>
  <meta name="description" content="Add name and date captions to photos, choose position, font, color, size, background stroke and download the final image." />
<meta name="keywords" content="add name on photo tool, add date on photo online, photo caption maker free, add text on image online, name on photo editor, add timestamp on photo">
<link rel="canonical" href="{{ request.scheme }}://{{ request.get_host }}/tools/name-date-on-photo/">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="article">
<meta property="og:site_name" content="WifiResult.com">
<meta property="og:url" content="{{ request.scheme }}://{{ request.get_host }}/tools/image-resizer/">
<meta property="og:title" content="Name & Date on Photo — WifiResult Tool">
<meta property="og:description" content="Add name and date captions to photos, choose position, font, color, size, background stroke and download the final image.">
<meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}/static/tools/name-date-on-photo-banner.webp">
<meta property="og:image:alt" content="WifiResult – Sarkari Result & Govt Job Updates">
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="675" />
<meta property="og:image:type" content="image/webp">
<meta property="og:updated_time" content="{% now 'c' %}" />
<meta property="article:published_time" content="{% now 'c' %}">
<meta property="article:modified_time" content="{% now 'c' %}">
<meta property="article:author" content="Arvind Pal"/>

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="{{ request.scheme }}://{{ request.get_host }}/tools/image-resizer/">
<meta name="twitter:title" content="Name & Date on Photo — WifiResult Tool">
<meta name="twitter:description" content="Add name and date captions to photos, choose position, font, color, size, background stroke and download the final image.">
<meta name="twitter:image" content="{{ request.scheme }}://{{ request.get_host }}/static/tools/name-date-on-photo-banner.webp">
<meta name="twitter:site" content="@WifiResult" />
<meta name="twitter:creator" content="@arvindpal" />
<meta name="twitter:label1" content="Written by" />
<meta name="twitter:data1" content="Arvind Pal" />
<meta name="twitter:label2" content="Time to read" />
<meta name="twitter:data2" content="6 minutes" />

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Name & Date on Photo — WifiResult Tool",
  "url": "{{ request.scheme }}://{{ request.get_host }}/tools/name-date-on-photo/",
  "description": "Add name and date captions to photos, choose position, font, color, size, background stroke and download the final image."
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "Name & Date on Photo — WifiResult Tool",
  "applicationCategory": "Photo Editing Tool",
  "operatingSystem": "All",
  "url": "{{ request.scheme }}://{{ request.get_host }}/tools/name-date-on-photo/",
  "description": "Add name and date captions to photos, choose position, font, color, size, background stroke and download the final image."
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "Home", "item": "{{ request.scheme }}://{{ request.get_host }}/" },
    { "@type": "ListItem", "position": 2, "name": "Tools", "item": "{{ request.scheme }}://{{ request.get_host }}/tools/" },
    { "@type": "ListItem", "position": 3, "name": "Name & Date on Photo", "item": "{{ request.scheme }}://{{ request.get_host }}/tools/name-date-on-photo/"  }
  ]
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I add my name on a photo?",
      "acceptedAnswer": { "@type": "Answer", "text": "Upload your image, enter your name, choose a position, and download the edited photo." }
    },
    {
      "@type": "Question",
      "name": "Can I add date and time on a photo?",
      "acceptedAnswer": { "@type": "Answer", "text": "Yes, the tool supports adding date and time in multiple formats." }
    },
    {
      "@type": "Question",
      "name": "Is the tool free to use?",
      "acceptedAnswer": { "@type": "Answer", "text": "Yes, it is 100% free and adds no watermark." }
    },
    {
      "@type": "Question",
      "name": "Can I change font, size and color?",
      "acceptedAnswer": { "@type": "Answer", "text": "Yes, you can fully customize text style, color, stroke, and background box." }
    }
  ]
}
</script>


  {% endblock seo %}

  {% block style %}    

 <style>
    :root{
      --bg:#f7fafc; --card:#fff; --accent:#0ea5e9; --muted:#6b7280; --radius:14px;
    }
    *{box-sizing:border-box}
    body{font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial; margin:0; background:linear-gradient(180deg,#fbfdff,#f0f9ff); color:#0f172a}
    .wrap{max-width:980px;margin:28px auto;padding:20px}
    h1{margin:0 0 12px;font-size:20px}
    .card{background:var(--card);border-radius:var(--radius);padding:16px;box-shadow:0 8px 30px rgba(2,6,23,.06)}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
    @media(max-width:900px){.grid{grid-template-columns:1fr} .grid aside{order:-1}}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type=file]{display:block}
    .controls{display:grid;gap:10px}
    .row{display:flex;gap:8px;align-items:center}
    input[type=number], select, input[type=text], input[type=date], input[type=time]{padding:10px;border-radius:10px;border:1px solid #e6eef7;width:100%}
    button{padding:10px 12px;border-radius:10px;border:none;background:var(--accent);color:#fff;cursor:pointer}
    .btn-ghost{background:#fff;border:1px solid #e6eef7;color:#0f172a}
    .preview{display:flex;flex-direction:column;gap:10px;align-items:center}
    img#previewImg{max-width:100%;border-radius:8px;border:1px solid #e6eef7}
    .meta{font-size:13px;color:var(--muted)}
    .small{font-size:12px;color:var(--muted)}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap}
    .progress{height:8px;background:#e6eef7;border-radius:8px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#06b6d4);width:0%}
    .help{font-size:12px;color:var(--muted)}
    .preset{display:flex;gap:6px;flex-wrap:wrap}
    .preset button{background:#f3f4f6;color:#111;padding:6px 8px;border-radius:8px;border:1px solid #e6eef7}
    .toggle{display:inline-flex;align-items:center;gap:8px}
  </style>

  {% endblock style %}

  {% block content %}
<br>
  <!-- Breadcrumb -->
<div class="breadcrumb container" style="padding-left:20px;">
  <a href="/">Home</a>
  <span>&gt;</span>
  <a href="{% url 'tools' %}">Tools</a>
  <span>&gt;</span>
  <span>Name & Date on Photo Maker</span>
</div>
<div class="wrap">
    <h1>Name & Date on Photo Maker</h1>
    <div class="card grid">
      <div>
        <div class="card" style="padding:12px">
          <label>Upload Image</label>
          <input id="fileInput" type="file" accept="image/*" />
          <div style="margin-top:10px" class="small">Supported: PNG, JPEG, WEBP, HEIC (if browser supports). Max ~30MB recommended.</div>

          <hr style="margin:12px 0" />

          <div class="controls">

            <div>
              <label>Text: Name</label>
              <input id="nameText" type="text" placeholder="Enter name to overlay" />
            </div>

            <div>
              <label>Date</label>
              <div class="row">
                <input id="dateInput" type="date" />
                <input id="timeInput" type="time" style="width:140px" />
              </div>
              <div class="small">Leave date empty to hide date.</div>
            </div>

            <div>
              <label>Date Format</label>
              <select id="dateFormat">
                <option value="DD-MM-YYYY">DD-MM-YYYY</option>
                <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                <option value="Month D, YYYY">Month D, YYYY</option>
                <option value="D Month YYYY">D Month YYYY</option>
              </select>
            </div>

            <div class="row">
              <div style="flex:1">
                <label>Position</label>
                <select id="position">
                  <option value="bottom-right">Bottom Right</option>
                  <option value="bottom-left">Bottom Left</option>
                  <option value="bottom-center">Bottom Center</option>
                  <option value="top-right">Top Right</option>
                  <option value="top-left">Top Left</option>
                  <option value="center">Center</option>
                </select>
              </div>
              <div style="width:120px">
                <label>Margin (px)</label>
                <input id="margin" type="number" min="0" value="20" />
              </div>
            </div>

            <div class="row">
              <div style="flex:1">
                <label>Font Size (px)</label>
                <input id="fontSize" type="number" min="6" max="300" value="40" />
              </div>
              <div style="width:160px">
                <label>Line Height</label>
                <input id="lineHeight" type="number" min="0.8" step="0.1" value="1.1" />
              </div>
            </div>

            <div class="row">
              <div style="flex:1">
                <label>Font Family</label>
                <select id="fontFamily">
                  <option value="sans-serif">Sans-serif</option>
                  <option value="serif">Serif</option>
                  <option value="monospace">Monospace</option>
                  <option value="Arial">Arial</option>
                  <option value="Georgia">Georgia</option>
                </select>
              </div>
              <div style="width:140px">
                <label>Font Weight</label>
                <select id="fontWeight">
                  <option value="400">Normal</option>
                  <option value="600">Semi-bold</option>
                  <option value="700">Bold</option>
                </select>
              </div>
            </div>

            <div class="row">
              <div style="flex:1">
                <label>Text Color</label>
                <input id="textColor" type="text" placeholder="#ffffff or white" value="#ffffff" />
              </div>
              <div style="width:140px">
                <label>Stroke (outline) px</label>
                <input id="strokeWidth" type="number" min="0" value="2" />
              </div>
            </div>

            <div>
              <label>Stroke Color / Background Box</label>
              <div class="row">
                <input id="strokeColor" type="text" placeholder="#000000 or black" value="#000000" />
                <label class="toggle" style="margin-left:8px"><input id="bgBox" type="checkbox" /> Background box</label>
              </div>
            </div>

            <div>
              <label class="small">Preview & Export</label>
              <div style="display:flex;gap:8px;margin-top:8px">
                <button id="previewBtn">Preview</button>
                <button id="downloadBtn">Download</button>
                <button id="resetBtn" class="btn-ghost">Reset</button>
              </div>
            </div>

            <div style="margin-top:8px">
              <div class="progress" aria-hidden>
                <i id="progressBar"></i>
              </div>
            </div>

          </div>
        </div>

        <div style="margin-top:12px" class="card">
          <label>Tips & Notes</label>
          <ul class="small">
            <li>Use high contrast text + stroke or background box for readability on busy photos.</li>
            <li>Downloaded image preserves original format when possible (PNG/JPG/WEBP).</li>
            <li>Large images may be slower to process on low-end devices.</li>
          </ul>
        </div>

      </div>

      <aside>
        <div class="card preview">
          <div style="width:100%">
            <label>Preview</label>
            <div style="border:1px dashed #e6eef7;padding:8px;border-radius:8px;min-height:220px;display:flex;align-items:center;justify-content:center">
              <canvas id="previewCanvas" style="max-width:100%;border-radius:8px;display:none"></canvas>
              <img id="previewImg" alt="Preview" src="" style="display:none" />
              <div id="placeholder" class="meta">No image loaded</div>
            </div>
          </div>

          <div style="width:100%;display:flex;flex-direction:column;gap:8px;margin-top:10px">
            <div class="meta">Original: <span id="origSize">—</span> • <span id="origDim">—</span></div>
            <div class="meta">Export: <span id="outSize">—</span> • <span id="outDim">—</span></div>
            <div class="meta">Actions: <span class="small">Preview → Download</span></div>
            <div style="display:flex;gap:8px;justify-content:center;margin-top:8px">
              <button id="downloadPreview" class="btn-ghost">Download Preview</button>
              <button id="resetBtnSide" class="btn-ghost">Reset</button>
            </div>
          </div>
        </div>
      </aside>

    </div>

    <!-- Usage info added here: instructions on how to use the tool (placed above footer, below tools) -->
    <div style="margin-top:12px" class="card">
      <label>Tool — Kaise Use Karein</label>
      <div class="small" style="margin-top:8px;line-height:1.5">
        <ul>
          <li><strong>1.</strong> "Upload Image" se apni image chunein (PNG, JPG, WEBP, HEIC).</li>
          <li><strong>2.</strong> Name aur Date daalein. Date ko empty chhodne se date add nahin hoga.</li>
          <li><strong>3.</strong> Position, font size, color, stroke, aur background box set karein.</li>
          <li><strong>4.</strong> "Preview" dekh kar final layout confirm karein. "Download" se final file download karein.</li>
          <li><strong>5.</strong> Tip: Busy photos ke liye stroke/box enable karein taaki text readable rahe.</li>
        </ul>
      </div>
    </div>

    <div style="margin-top:12px" class="small">© 2026 wifiresult — Name & Date on Photo Maker</div>
  </div>

  <script>
  (function(){
    const fileInput = document.getElementById('fileInput');
    const previewCanvas = document.getElementById('previewCanvas');
    const previewImg = document.getElementById('previewImg');
    const placeholder = document.getElementById('placeholder');
    const origSize = document.getElementById('origSize');
    const origDim = document.getElementById('origDim');
    const outSize = document.getElementById('outSize');
    const outDim = document.getElementById('outDim');
    const progressBar = document.getElementById('progressBar');
    const previewBtn = document.getElementById('previewBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const downloadPreview = document.getElementById('downloadPreview');
    const resetBtnSide = document.getElementById('resetBtnSide');
    const resetBtn = document.getElementById('resetBtn');

    const nameText = document.getElementById('nameText');
    const dateInput = document.getElementById('dateInput');
    const timeInput = document.getElementById('timeInput');
    const dateFormat = document.getElementById('dateFormat');
    const position = document.getElementById('position');
    const marginInput = document.getElementById('margin');
    const fontSizeInput = document.getElementById('fontSize');
    const lineHeightInput = document.getElementById('lineHeight');
    const fontFamily = document.getElementById('fontFamily');
    const fontWeight = document.getElementById('fontWeight');
    const textColor = document.getElementById('textColor');
    const strokeWidth = document.getElementById('strokeWidth');
    const strokeColor = document.getElementById('strokeColor');
    const bgBox = document.getElementById('bgBox');

    document.getElementById('year').textContent = new Date().getFullYear();

    const presets = document.querySelectorAll('.preset button');
    presets.forEach(b=>b.addEventListener('click',()=>{ /* no presets for this tool */ }));

    let originalImage = null; // Image
    let originalBlob = null;
    let lastExportBlob = null;

    function setProgress(p){ progressBar.style.width = (p*100)+'%'; }

    fileInput.addEventListener('change', async (e)=>{
      const f = e.target.files && e.target.files[0];
      if(!f) return resetAll();
      if(!f.type.startsWith('image/')){ alert('Please upload an image file'); return; }
      originalBlob = f;
      const url = URL.createObjectURL(f);
      const img = new Image();
      img.onload = ()=>{
        originalImage = img;
        previewImg.src = url; previewImg.style.display='none'; previewCanvas.style.display='block'; placeholder.style.display='none';
        origSize.textContent = formatBytes(f.size); origDim.textContent = img.width+'×'+img.height;
        outSize.textContent='—'; outDim.textContent='—'; lastExportBlob=null; setProgress(0);
        drawPreview();
      };
      img.onerror = ()=>{ alert('Failed to load image'); URL.revokeObjectURL(url); }
      img.src = url;
    });

    function formatBytes(n){ if(n==null) return '—'; if(n<1024) return n+' B'; if(n<1024*1024) return (n/1024).toFixed(1)+' KB'; return (n/1024/1024).toFixed(2)+' MB'; }

    function formatDateString(dateStr, timeStr, fmt){ if(!dateStr) return ''; try{ const d = new Date(dateStr + (timeStr?('T'+timeStr):'')); if(isNaN(d)) return ''; const day = d.getDate(); const month = d.getMonth(); const year = d.getFullYear(); const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December']; if(fmt==='DD-MM-YYYY') return String(day).padStart(2,'0') + '-' + String(month+1).padStart(2,'0') + '-' + year; if(fmt==='YYYY-MM-DD') return year + '-' + String(month+1).padStart(2,'0') + '-' + String(day).padStart(2,'0'); if(fmt==='Month D, YYYY') return monthNames[month] + ' ' + day + ', ' + year; if(fmt==='D Month YYYY') return day + ' ' + monthNames[month] + ' ' + year; return d.toLocaleString(); }catch(e){ return ''; } }

    function drawPreview(){
      if(!originalImage) return;
      setProgress(0.1);
      const canvas = previewCanvas; const ctx = canvas.getContext('2d');
      // size canvas to image display size while preserving resolution
      canvas.width = originalImage.width; canvas.height = originalImage.height;

      // clear
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // draw image
      ctx.drawImage(originalImage,0,0);
      setProgress(0.4);

      // prepare text lines
      const lines = [];
      const nameVal = nameText.value.trim();
      const dateVal = formatDateString(dateInput.value, timeInput.value, dateFormat.value);
      if(nameVal) lines.push(nameVal);
      if(dateVal) lines.push(dateVal);
      if(lines.length===0){ setProgress(1); return; }

      const fs = parseInt(fontSizeInput.value,10) || 40;
      const lh = parseFloat(lineHeightInput.value) || 1.1;
      const font = (fontWeight.value||'700') + ' ' + fs + 'px ' + (fontFamily.value||'sans-serif');
      ctx.font = font;
      ctx.textBaseline = 'alphabetic';
      ctx.lineJoin = 'round';

      // measure total height
      const lineMetrics = lines.map((l)=>{ const metrics = ctx.measureText(l); const h = fs; return {text:l, width: metrics.width, height: h}; });
      const totalHeight = lineMetrics.reduce((s,ln)=>s + ln.height * lh, 0);

      // position
      const margin = parseInt(marginInput.value,10) || 20;
      let x, y, align='left';
      const pos = position.value;
      if(pos === 'bottom-center'){
        x = canvas.width / 2; align='center';
        y = canvas.height - margin - (totalHeight - (fs * (1 - (1/lh))));
      } else if(pos.includes('right')){
        x = canvas.width - margin; align='right';
      }
      else if(pos.includes('left')){
        x = margin; align='left';
      }
      else {
        x = canvas.width/2; align='center';
      }

      if(pos.includes('bottom') && pos !== 'bottom-center'){
        y = canvas.height - margin - (totalHeight - (fs * (1 - (1/lh))));
      }
      else if(pos.includes('top')){
        y = margin + fs;
      }
      else if(pos === 'center'){
        y = canvas.height/2 - totalHeight/2 + fs;
      }

      ctx.textAlign = align;

      // optional background box
      if(bgBox.checked){
        // compute box width as max line width + padding
        const padding = Math.round(fs*0.4);
        const maxW = Math.max(...lineMetrics.map(l=>l.width));
        let bx, by, bw, bh;
        bw = maxW + padding*2; bh = totalHeight + padding*2 - (fs*(lh-1));
        if(align==='right') bx = x - bw; else if(align==='center') bx = x - bw/2; else bx = x;
        if(pos.includes('bottom')) by = canvas.height - margin - bh; else if(pos.includes('top')) by = margin; else by = y - fs;
        ctx.fillStyle = strokeColor.value || 'rgba(0,0,0,0.6)';
        ctx.globalAlpha = 0.6;
        ctx.fillRect(bx, by, bw, bh);
        ctx.globalAlpha = 1;
      }

      // draw each line with stroke then fill
      const sw = parseFloat(strokeWidth.value) || 0;
      ctx.fillStyle = textColor.value || '#ffffff';
      ctx.strokeStyle = strokeColor.value || '#000000';
      ctx.lineWidth = sw;
      let drawY = y;
      for(let i=0;i<lineMetrics.length;i++){
        const ln = lineMetrics[i];
        // draw stroke for readability
        if(sw>0){ ctx.strokeText(ln.text, x, drawY); }
        ctx.fillText(ln.text, x, drawY);
        drawY += ln.height * lh;
      }

      setProgress(1);
      // update preview image size info
      outSize.textContent = formatBytes(canvas.toDataURL().length); outDim.textContent = canvas.width+'×'+canvas.height;
      try{ lastExportBlob = null; }catch(e){}
    }

    function canvasToBlob(canvas, mime){ return new Promise((res)=> canvas.toBlob(b=>res(b), mime || 'image/png', 0.92)); }

    previewBtn.addEventListener('click', async ()=>{
      if(!originalImage) { alert('Please upload an image'); return; }
      setProgress(0);
      drawPreview();
      setTimeout(()=>setProgress(0),600);
    });

    downloadBtn.addEventListener('click', async ()=>{
      if(!originalImage) { alert('Please upload an image'); return; }
      setProgress(0.05);
      drawPreview();
      setProgress(0.6);
      const canvas = previewCanvas;
      const mime = originalBlob && originalBlob.type ? originalBlob.type : 'image/png';
      const blob = await canvasToBlob(canvas, mime);
      if(!blob){ alert('Export failed'); setProgress(0); return; }
      lastExportBlob = blob;
      outSize.textContent = formatBytes(blob.size); outDim.textContent = canvas.width+'×'+canvas.height; setProgress(0.95);
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = (nameText.value? nameText.value.replace(/\s+/g,'_'):'photo') + '_caption' + (mime==='image/png'?'.png': mime==='image/jpeg'?'.jpg':'.webp'); a.click();
      setTimeout(()=>{ setProgress(0); },500);
    });

    downloadPreview.addEventListener('click', ()=>{
      if(!lastExportBlob){ alert('No exported image available. Click Download to create one.'); return; }
      const a = document.createElement('a'); a.href = URL.createObjectURL(lastExportBlob); a.download = 'captioned-image.png'; a.click();
    });

    resetBtnSide.addEventListener('click', resetAll);
    resetBtn.addEventListener('click', resetAll);

    function resetAll(){ fileInput.value=''; previewImg.src=''; previewImg.style.display='none'; previewCanvas.style.display='none'; placeholder.style.display='block'; originalImage=null; originalBlob=null; lastExportBlob=null; origSize.textContent='—'; origDim.textContent='—'; outSize.textContent='—'; outDim.textContent='—'; setProgress(0); }

    // redraw on input changes for live feel
    const inputsToWatch = [nameText, dateInput, timeInput, dateFormat, position, marginInput, fontSizeInput, lineHeightInput, fontFamily, fontWeight, textColor, strokeWidth, strokeColor, bgBox];
    inputsToWatch.forEach(inp=>inp.addEventListener('input', ()=>{ if(originalImage) drawPreview(); }));

    // small safety: revoke object URLs when navigating
    window.addEventListener('unload', ()=>{ try{ URL.revokeObjectURL(previewImg.src); }catch(e){} });

  })();
  </script>


  {% endblock content %}